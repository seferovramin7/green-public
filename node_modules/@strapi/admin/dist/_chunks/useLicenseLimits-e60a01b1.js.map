{"version":3,"file":"useLicenseLimits-e60a01b1.js","sources":["../../ee/admin/src/hooks/useLicenseLimits.ts"],"sourcesContent":["import * as React from 'react';\n\nimport { useFetchClient } from '@strapi/helper-plugin';\nimport { AxiosError } from 'axios';\nimport { useQuery } from 'react-query';\n\nimport { GetLicenseLimitInformation } from '../../../../shared/contracts/admin';\n\ninterface UseLicenseLimitsArgs {\n  enabled?: boolean;\n}\n\nfunction useLicenseLimits({ enabled }: UseLicenseLimitsArgs = { enabled: true }) {\n  const { get } = useFetchClient();\n  const { data, isError, isLoading } = useQuery<\n    GetLicenseLimitInformation.Response,\n    AxiosError<GetLicenseLimitInformation.Response['error']>\n  >(\n    ['ee', 'license-limit-info'],\n    async () => {\n      const { data } = await get<GetLicenseLimitInformation.Response>(\n        '/admin/license-limit-information'\n      );\n\n      return data;\n    },\n    {\n      enabled,\n    }\n  );\n\n  type FeatureNames = GetLicenseLimitInformation.Response['data']['features'][number]['name'];\n\n  type GetFeatureType = <T>(name: FeatureNames) => Record<string, T> | undefined;\n\n  const getFeature = React.useCallback<GetFeatureType>(\n    (name) => {\n      const feature = data?.data?.features.find((feature) => feature.name === name);\n\n      if (feature && 'options' in feature) {\n        return feature.options;\n      } else {\n        return {};\n      }\n    },\n    [data]\n  );\n\n  return { license: data?.data, getFeature, isError, isLoading };\n}\n\nexport { useLicenseLimits };\nexport type { UseLicenseLimitsArgs };\n"],"names":["useFetchClient","useQuery","data","React","feature"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAYA,SAAS,iBAAiB,EAAE,QAAA,IAAkC,EAAE,SAAS,QAAQ;AACzE,QAAA,EAAE,QAAQA,aAAAA;AAChB,QAAM,EAAE,MAAM,SAAS,UAAc,IAAAC,WAAA;AAAA,IAInC,CAAC,MAAM,oBAAoB;AAAA,IAC3B,YAAY;AACV,YAAM,EAAE,MAAAC,MAAK,IAAI,MAAM;AAAA,QACrB;AAAA,MAAA;AAGKA,aAAAA;AAAAA,IACT;AAAA,IACA;AAAA,MACE;AAAA,IACF;AAAA,EAAA;AAOF,QAAM,aAAaC,iBAAM;AAAA,IACvB,CAAC,SAAS;AACF,YAAA,UAAU,MAAM,MAAM,SAAS,KAAK,CAACC,aAAYA,SAAQ,SAAS,IAAI;AAExE,UAAA,WAAW,aAAa,SAAS;AACnC,eAAO,QAAQ;AAAA,MAAA,OACV;AACL,eAAO;MACT;AAAA,IACF;AAAA,IACA,CAAC,IAAI;AAAA,EAAA;AAGP,SAAO,EAAE,SAAS,MAAM,MAAM,YAAY,SAAS;AACrD;;"}