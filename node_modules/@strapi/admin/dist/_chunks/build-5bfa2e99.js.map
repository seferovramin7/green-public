{"version":3,"file":"build-5bfa2e99.js","sources":["../../_internal/cli/commands/build.ts"],"sourcesContent":["import { build as nodeBuild, BuildOptions } from '../../node/build';\nimport { handleUnexpectedError } from '../../node/core/errors';\n\ninterface BuildCLIOptions extends BuildOptions {\n  /**\n   * @deprecated use `minify` instead\n   */\n  optimization?: boolean;\n}\n\nconst build = async (options: BuildCLIOptions) => {\n  try {\n    if (typeof process.env.STRAPI_ENFORCE_SOURCEMAPS !== 'undefined') {\n      options.logger.warn(\n        \"[@strapi/strapi]: STRAPI_ENFORCE_SOURCEMAPS is now deprecated. You can enable sourcemaps by passing '--sourcemaps' to the build command.\"\n      );\n    }\n    if (typeof options.optimization !== 'undefined' && options.optimization !== true) {\n      options.logger.warn(\n        \"[@strapi/strapi]: The optimization argument is now deprecated. Use '--minify' instead.\"\n      );\n    }\n\n    const envSourceMaps = process.env.STRAPI_ENFORCE_SOURCEMAPS === 'true';\n\n    await nodeBuild({\n      ...options,\n      minify: options.optimization ?? options.minify,\n      sourcemaps: options.sourcemaps || envSourceMaps,\n    });\n  } catch (err) {\n    handleUnexpectedError(err);\n  }\n};\n\nexport { build };\nexport type { BuildCLIOptions };\n"],"names":["nodeBuild","handleUnexpectedError"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUM,MAAA,QAAQ,OAAO,YAA6B;AAC5C,MAAA;AACF,QAAI,OAAO,QAAQ,IAAI,8BAA8B,aAAa;AAChE,cAAQ,OAAO;AAAA,QACb;AAAA,MAAA;AAAA,IAEJ;AACA,QAAI,OAAO,QAAQ,iBAAiB,eAAe,QAAQ,iBAAiB,MAAM;AAChF,cAAQ,OAAO;AAAA,QACb;AAAA,MAAA;AAAA,IAEJ;AAEM,UAAA,gBAAgB,QAAQ,IAAI,8BAA8B;AAEhE,UAAMA,YAAU;AAAA,MACd,GAAG;AAAA,MACH,QAAQ,QAAQ,gBAAgB,QAAQ;AAAA,MACxC,YAAY,QAAQ,cAAc;AAAA,IAAA,CACnC;AAAA,WACM,KAAK;AACZC,UAAA,sBAAsB,GAAG;AAAA,EAC3B;AACF;;"}